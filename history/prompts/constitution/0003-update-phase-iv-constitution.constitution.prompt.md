---
id: 0003
title: Update Phase IV Constitution
stage: constitution
date: 2026-02-07
surface: agent
model: claude-sonnet-4-5-20250929
feature: none
branch: phase-III-main
user: emizee
command: /sp.constitution
labels: ["constitution", "phase-iv", "infrastructure", "containerization", "kubernetes"]
links:
  spec: null
  ticket: null
  adr: null
  pr: null
files:
 - .specify/memory/constitution.md
tests:
 - none
---

## Prompt

Project: Phase IV ‚Äì Local Kubernetes Deployment of Todo AI Chatbot

Scope:
This constitution governs Phase IV only.
It extends the Phase III constitution without modifying or overriding
application-level behavior, APIs, security guarantees, or MCP tooling.

The application code is considered LOCKED.
Only infrastructure, containerization, deployment, and operations
are in scope for this phase.

---

Core Principles:

- Spec-Driven Infrastructure Development
  All infrastructure work must originate from written specifications
  before execution. No ad-hoc commands or manual configuration.

- Agentic DevOps First
  All containerization and Kubernetes operations must be performed
  using AI agents wherever possible (Docker AI, kubectl-ai, Kagent).
  Human-written YAML or Dockerfiles are discouraged unless explicitly required.

- Zero Application Logic Changes
  No backend, frontend, MCP tool, database, or authentication logic
  may be altered in Phase IV.

- Reproducible Local Cloud-Native Deployment
  The system must be deployable from scratch on a local machine
  using Minikube and documented commands.

---

Infrastructure Standards:

- Containerization:
  - Frontend and backend must be containerized separately
  - Docker AI Agent (Gordon) must be preferred for:
    - Dockerfile generation
    - Image optimization
    - Best practice validation
  - Images must be buildable via Docker Desktop

- Kubernetes:
  - Target environment: Local Minikube cluster
  - Deployments must use Kubernetes Deployments and Services
  - No raw Pod definitions allowed
  - Resource requests and limits must be defined

- Helm:
  - All Kubernetes resources must be packaged as Helm charts
  - Charts must include:
    - Chart.yaml
    - values.yaml
    - deployment templates
    - service templates
  - Configuration must be parameterized via values.yaml

---

AI Operations (AIOps) Standards:

- Docker AI (Gordon):
  - Must be used for Docker-related reasoning and optimization
  - CLI usage should be demonstrated via `docker ai` commands

- kubectl-ai:
  - Must be used for:
    - Deployments
    - Scaling
    - Debugging pod or service failures

- Kagent:
  - Must be used for:
    - Cluster health analysis
    - Resource optimization recommendations
    - Post-deployment operational insights

---

Constraints:

- No cloud providers (AWS, GCP, Azure)
- No production clusters
- No manual YAML editing unless generated by AI agents
- No Helm charts copied from external repositories
- No changes to Phase III REST API or MCP contracts

---

Success Criteria:

- Frontend and backend images build successfully
- Helm charts install cleanly on Minikube
- Application runs correctly in Kubernetes
- kubectl-ai commands demonstrate deployment and scaling
- Kagent provides cluster health and optimization insights
- Entire process is spec-driven, agent-assisted, and reproducible
- Deployment is demo-ready and judge-verifiable

---

Authority Hierarchy:

Phase III Constitution
‚Üí Phase IV Constitution
‚Üí Phase IV Specifications
‚Üí Phase IV Plans
‚Üí Phase IV Tasks
‚Üí Execution

Any conflict must be resolved in favor of the higher authority.

## Response snapshot

Updated the project constitution to reflect Phase IV requirements for local Kubernetes deployment, containerization, and orchestration. Added new principles for spec-driven infrastructure development, agentic DevOps first, zero application logic changes, and reproducible local cloud-native deployment. Incorporated infrastructure standards for containerization, Kubernetes, and Helm, along with AI Operations standards for Docker AI, kubectl-ai, and Kagent.

## Outcome

- ‚úÖ Impact: Updated constitution now reflects Phase IV infrastructure and deployment requirements
- üß™ Tests: none
- üìÅ Files: Modified .specify/memory/constitution.md to version 3.0.0
- üîÅ Next prompts: Create Phase IV specifications based on new constitution
- üß† Reflection: Constitution now properly extends Phase III while focusing on infrastructure and deployment

## Evaluation notes (flywheel)

- Failure modes observed: Script permission issue prevented automated PHR creation
- Graders run and results (PASS/FAIL): N/A
- Prompt variant (if applicable): N/A
- Next experiment (smallest change to try): Ensure proper file permissions for automation scripts